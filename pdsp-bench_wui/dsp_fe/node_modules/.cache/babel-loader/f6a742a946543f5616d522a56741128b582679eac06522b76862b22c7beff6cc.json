{"ast":null,"code":"import ClusterInfo from \"@/components/ClusterInfo.vue\";\nimport axios from 'axios';\nexport default {\n  name: 'ExploreClusters',\n  components: {\n    ClusterInfo\n  },\n  data() {\n    return {\n      url: process.env.VUE_APP_URL,\n      loading: false,\n      showidle: true,\n      list_of_all_clusters: [],\n      showClusterInfo: false,\n      selectedClusterId: ''\n    };\n  },\n  computed: {\n    snackbar: {\n      get() {\n        return this.$store.state.snackbar;\n      },\n      set(value) {\n        this.$store.commit('setSnackbar', value);\n      }\n    },\n    cluster_id: {\n      get() {\n        return this.$store.state.cluster_id;\n      },\n      set(value) {\n        this.$store.commit('setClusterId', value);\n      }\n    }\n  },\n  methods: {\n    async viewMore(cluster) {\n      this.showClusterInfo = true;\n      this.selectedClusterId = cluster.id;\n    },\n    async deleteCluster(cluster) {\n      await axios.delete(this.url + \":8000/infra/delete/\" + cluster.id).then(async resp => {\n        console.log(resp);\n        this.loading = true;\n        setTimeout(() => this.loading = false, 2000);\n        this.snackbar = {\n          view: true,\n          timeout: 3000,\n          text: 'Deleted the cluster successfully',\n          color: 'primary'\n        };\n        this.refresh();\n      }).catch(err => {\n        console.log(err);\n        this.snackbar = {\n          view: true,\n          timeout: 3000,\n          text: 'Could not delete the cluster ',\n          color: 'error'\n        };\n      });\n    },\n    async refresh() {\n      await axios.get(this.url + \":8000/infra/getAll/1\").then(resp => {\n        console.log(resp);\n        this.list_of_all_clusters = resp.data.list_of_cluster;\n        if (this.list_of_all_clusters.length == 0) {\n          this.showidle = true;\n        } else {\n          this.showidle = !this.showidle;\n        }\n      });\n    },\n    clusterDate(clusterdate) {\n      let date = new Date(clusterdate);\n      return date.toLocaleString();\n    }\n  },\n  //whenever this component (explorecluster.vue) is loaded the mounted method is executed at the first.\n  async mounted() {\n    this.refresh();\n  }\n};","map":{"version":3,"mappings":"AAoGA;AACA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;MACAC;QACA;MACA;MACAC;QACA;MACA;IACA;IACAC;MACAF;QACA;MACA;MACAC;QACA;MACA;IACA;EACA;EACAE;IAEA;MAEA;MACA;IACA;IACA;MACA,YACAC,sDACAC;QACAC;QACA;QACAC;QACA;UACAC;UACAC;UACAC;UACAC;QACA;QACA;MACA,GACAC;QACAN;QACA;UACAE;UACAC;UACAC;UACAC;QACA;MACA;IACA;IACA;MAEA,YACAX,uCACAK;QAEAC;QACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAO;MACA;MACA;IACA;EACA;EACA;EACA;IAEA;EAEA;AACA","names":["name","components","ClusterInfo","data","url","loading","showidle","list_of_all_clusters","showClusterInfo","selectedClusterId","computed","snackbar","get","set","cluster_id","methods","delete","then","console","setTimeout","view","timeout","text","color","catch","clusterDate"],"sourceRoot":"src/views/dashboard","sources":["ExploreClusters.vue"],"sourcesContent":["<template>\n    <div>\n        \n\n        <v-hover v-slot:default=\"{ hover }\"> \n        <v-card class=\"my-6 pa-0\" :elevation=\"hover ? 24 : 6\" >\n            <v-card-title>\n                <v-sheet color=\"primary\" elevation=\"16\"\n                  class=\"justify-center mt-n12 pl-16 pr-16 pt-6 pb-6 rounded  white--text \">\n                  <h3>Explore All Clusters</h3>\n                </v-sheet>\n            </v-card-title>\n            <v-card-text>\n                <v-row>\n                   <v-col v-if=\"showidle\">\n                    <v-sheet \n                    color=\"secondary\" \n                    elevation=\"16\"\n                    height=\"150\"\n                    class=\"justify-center  pl-16 pr-16 pt-6 pb-6 rounded  white--text \">\n                    <h3>No running clusters at the moment !</h3>\n                </v-sheet>\n                   </v-col>\n                   \n                \n                    <v-col v-for=\"cluster in list_of_all_clusters\" :key=\"cluster.id\" cols=\"4\">\n\n <v-hover v-slot:default=\"{ hover }\">                     \n  <v-card :elevation=\"hover ? 24 : 6\"\n    :loading=\"loading\"\n    class=\"mx-auto my-12\"\n    max-width=\"374\"\n  >\n    <template slot=\"progress\">\n      <v-progress-linear\n        color=\"deep-purple\"\n        height=\"10\"\n        indeterminate\n      ></v-progress-linear>\n    </template>\n\n    <v-img v-if=\"cluster.cluster_type == 'Apache Flink'\" height=\"250\" src=\"../../assets/flink.png\"></v-img>\n    <v-img v-if=\"cluster.cluster_type == 'Apache Storm'\" height=\"250\" src=\"../../assets/storm.png\"></v-img>\n\n    <v-card-title>\n      <span>{{cluster.name }}</span>\n    </v-card-title>\n\n    <v-card-text>\n\n      <div><b>Created {{ clusterDate(cluster.creation_date) }}</b></div>\n    </v-card-text>\n\n    <v-divider class=\"mx-4\"></v-divider>\n\n    <v-card-text>\n      <v-chip-group column>\n        <v-chip color=\"primary\">{{ cluster.cluster_type }}</v-chip>\n        <v-chip v-if=\"cluster.status == 'Running'\"  color=\"success\">Running</v-chip>\n        <v-chip v-if=\"cluster.status == 'Stopped'\">Stopped</v-chip>\n      </v-chip-group>\n    </v-card-text>\n\n    <v-card-actions>\n      <v-btn\n        color=\"primary\"\n        text\n        @click=\"deleteCluster(cluster)\"\n      >\n        Delete\n      </v-btn>\n      <v-btn\n        color=\"primary\"\n        text\n        @click=\"viewMore(cluster)\"\n      >\n        View more\n      </v-btn>\n\n     \n    </v-card-actions>\n  </v-card>\n </v-hover>\n\n                        <!-- old one -->\n                        \n                    </v-col>\n                    \n                </v-row>\n                \n            </v-card-text>\n            \n        </v-card>\n        </v-hover>\n        \n        <cluster-info @refresh=\"refresh()\" v-if=\"showClusterInfo == true\" :id=\"selectedClusterId\" ></cluster-info>\n        \n    </div>\n</template>\n<script>\nimport ClusterInfo from \"@/components/ClusterInfo.vue\";\nimport axios from 'axios';\nexport default {\n    name: 'ExploreClusters',\n    components: {\n        ClusterInfo\n    },\n    data(){\n        return {\n            url: process.env.VUE_APP_URL,\n            loading: false,\n            showidle:true,\n            list_of_all_clusters: [],\n            showClusterInfo: false,\n            selectedClusterId: ''\n        }   \n    },\n    \n    computed:{\n        snackbar: {\n          get() {\n            return this.$store.state.snackbar;\n          },\n          set(value) {\n            this.$store.commit('setSnackbar', value);\n          },\n        },\n        cluster_id: {\n          get() {\n            return this.$store.state.cluster_id;\n          },\n          set(value) {\n            this.$store.commit('setClusterId', value);\n          }\n        }\n    },\n    methods:{\n        \n        async viewMore(cluster){\n            \n            this.showClusterInfo = true;\n            this.selectedClusterId = cluster.id;\n        },\n        async deleteCluster(cluster){\n            await axios\n            .delete(this.url+\":8000/infra/delete/\"+cluster.id)\n            .then(async (resp)=>{\n                console.log(resp)\n                this.loading = true\n                setTimeout(() => (this.loading = false), 2000)\n                this.snackbar = {\n\t\t\t\t\tview: true,\n\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\ttext: 'Deleted the cluster successfully',\n\t\t\t\t\tcolor: 'primary'\n\t\t\t\t};\n                this.refresh()\n            })\n            .catch((err)=>{\n                console.log(err)\n                this.snackbar = {\n\t\t\t\t\tview: true,\n\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\ttext: 'Could not delete the cluster ',\n\t\t\t\t\tcolor: 'error'\n\t\t\t\t};\n            })  \n        },\n        async refresh() {\n            \n            await axios\n            .get(this.url+\":8000/infra/getAll/1\")\n            .then((resp)=>{\n                \n                console.log(resp)  \n                this.list_of_all_clusters = resp.data.list_of_cluster;\n                if(this.list_of_all_clusters.length == 0){\n                    this.showidle = true\n                }else{\n                    this.showidle = !this.showidle\n                }\n            })\n        },\n        clusterDate(clusterdate){\n            let date = new Date(clusterdate)\n            return date.toLocaleString()\n        } \n    },\n    //whenever this component (explorecluster.vue) is loaded the mounted method is executed at the first.\n    async mounted(){\n        \n        this.refresh();\n        \n    }\n}\n</script>\n<style>\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}