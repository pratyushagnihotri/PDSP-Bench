{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\nexport default {\n  name: 'ExploreJobs',\n  data() {\n    return {\n      jobtable: [],\n      url: process.env.VUE_APP_URL,\n      headers: [{\n        text: \"Job name\",\n        align: 'left',\n        value: 'name'\n      }, {\n        text: \"Cluster's main node\",\n        align: 'left',\n        value: 'main_node_ip'\n      }, {\n        text: \"Cluster's ID\",\n        align: 'left',\n        value: 'cluster'\n      }, {\n        text: \"Job ID\",\n        align: 'left',\n        value: 'jid'\n      }, {\n        text: \"State\",\n        value: 'state'\n      }, {\n        text: \"Submitted time\",\n        value: 'start-time'\n      }, {\n        text: \"Tasks\",\n        value: 'tasks.total'\n      }, {\n        text: \"Actions\",\n        sortable: false,\n        align: 'right',\n        value: 'last-modification'\n      }],\n      jobs: [],\n      searchTerm: ''\n    };\n  },\n  async mounted() {\n    await axios.get(this.url + \":8000/report/getAll/1\").then(resp => {\n      console.log(resp);\n      var respData = resp.data;\n      //console.log(respData['jobs'])\n      this.jobs = respData['jobs'];\n      console.log(this.jobs);\n      //this.jobs = [{'jid': '7f5f7c0328f7ac0ea099bd300dc5cc1c', 'name': 'Word Count', 'state': 'RUNNING', 'start-time': 1670800225891, 'end-time': -1, 'duration': 3217184, 'last-modification': 1670800226825, 'tasks': {'total': 4, 'created': 0, 'scheduled': 0, 'deploying': 0, 'running': 4, 'finished': 0, 'canceling': 0, 'canceled': 0, 'failed': 0, 'reconciling': 0, 'initializing': 0}}]\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  methods: {\n    viewMore(job) {\n      console.log(job);\n      this.cluster_id = job.cluster;\n      this.main_node_ip = job.main_node_ip;\n      this.$router.push('job/' + job['jid']);\n    },\n    async downloadFile(job) {\n      console.log(\"ghh\");\n      await axios.get(this.url + ':8000/report/getSinkTopicResults/' + job['cluster'] + '/' + job['jid'] + '/full').then(resp => {\n        console.log(resp.data.messages);\n        const jsonString = JSON.stringify(resp.data.messages);\n        const blob = new Blob([jsonString], {\n          type: 'text/plain;charset=utf-8'\n        });\n        saveAs(blob, 'result.txt');\n      });\n    }\n  },\n  computed: {\n    cluster_id: {\n      get() {\n        return this.$store.state.cluster_id;\n      },\n      set(value) {\n        this.$store.commit('setClusterId', value);\n      }\n    },\n    main_node_ip: {\n      get() {\n        return this.$store.state.main_node_ip;\n      },\n      set(value) {\n        this.$store.commit('setMainNodeIP', value);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AA+CA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC,UACA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAE;MAAA,GACA;QAAAF;QAAAE;MAAA,GACA;QAAAF;QAAAE;MAAA,GACA;QAAAF;QAAAG;QAAAF;QAAAC;MAAA,EACA;MACAE;MACAC;IAEA;EACA;EACA;IACA,YACAC,wCACAC;MACAC;MACA;MACA;MACA;MACAA;MACA;IACA,GACAC;MACAD;IACA;EACA;EACAE;IACAC;MACAH;MACA;MACA;MACA;IACA;IACA;MACAA;MACA,YACAF,sEACA,4BACAC;QACAC;QACA;QACA;UAAAI;QAAA;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACAT;QACA;MACA;MACAU;QACA;MACA;IACA;IACAC;MACAX;QACA;MACA;MACAU;QACA;MACA;IACA;EACA;AACA","names":["name","data","jobtable","url","headers","text","align","value","sortable","jobs","searchTerm","get","then","console","catch","methods","viewMore","type","saveAs","computed","cluster_id","set","main_node_ip"],"sourceRoot":"src/views/dashboard","sources":["ExploreJobs.vue"],"sourcesContent":["<template>\n    <div>\n        <v-hover v-slot:default=\"{ hover }\">\n        <v-card class=\"my-6 pa-0\" :elevation=\"hover ? 24 : 6\" >\n            <v-card-title>\n                <v-sheet color=\"primary\" elevation=\"16\"\n                  class=\"justify-center mt-n12 pl-16 pr-16 pt-6 pb-6 rounded  white--text \">\n                  <h3>Explore Jobs</h3>\n                </v-sheet>\n            </v-card-title>\n            <v-card-text>\n                \n                <v-text-field \n                    v-model=\"searchTerm\" \n                    placeholder=\"Search\" \n                ></v-text-field>\n                <v-data-table \n                    v-model=\"jobtable\"\n                    :headers=\"headers\" \n                    :items=\"jobs\" \n                    :search=\"searchTerm\"\n                    class=\"flex-grow-1 \"  \n                    item-key=\"name\" \n                    >\n                    \n                    <template #[`item.last-modification`]=\"{ item }\">\n                        <div class=\"actions\">\n                            <v-btn class=\"ma-2\" color=\"primary\" @click=\"viewMore(item)\" small>\n                                View more\n                            </v-btn>\n                            \n                        </div>\n                        <!-- <div class=\"actions\">\n                            <v-btn class=\"ma-2\" color=\"primary\" @click=\"downloadFile(item)\" small>\n                                Download results\n                            </v-btn>\n                            \n                        </div> -->\n                    </template>\n              \n            </v-data-table>\n            </v-card-text>\n        </v-card>\n    </v-hover>\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\nexport default {\n    name: 'ExploreJobs',\n    data(){\n        return {\n            jobtable:[],\n            url: process.env.VUE_APP_URL,\n            headers: [\n\t\t\t\t{ text: \"Job name\", align: 'left', value: 'name' },\n                { text: \"Cluster's main node\", align:'left', value:'main_node_ip'},\n                { text: \"Cluster's ID\", align:'left', value:'cluster'},\n                { text: \"Job ID\", align:'left', value:'jid'},\n\t\t\t\t{ text: \"State\", value: 'state' },\n\t\t\t\t{ text: \"Submitted time\", value: 'start-time' },\n                { text: \"Tasks\", value: 'tasks.total' },\n\t\t\t\t{ text: \"Actions\", sortable: false, align: 'right', value: 'last-modification' }\n\t\t\t],\n            jobs:[],\n            searchTerm:''\n\n        }\n    },\n    async mounted(){\n        await axios\n            .get(this.url+\":8000/report/getAll/1\")\n            .then((resp)=>{\n                console.log(resp)\n                var respData = resp.data\n                //console.log(respData['jobs'])\n                this.jobs = respData['jobs']\n                console.log(this.jobs);\n                //this.jobs = [{'jid': '7f5f7c0328f7ac0ea099bd300dc5cc1c', 'name': 'Word Count', 'state': 'RUNNING', 'start-time': 1670800225891, 'end-time': -1, 'duration': 3217184, 'last-modification': 1670800226825, 'tasks': {'total': 4, 'created': 0, 'scheduled': 0, 'deploying': 0, 'running': 4, 'finished': 0, 'canceling': 0, 'canceled': 0, 'failed': 0, 'reconciling': 0, 'initializing': 0}}]\n            })\n            .catch((err)=>{\n                console.log(err)\n            })\n    },\n    methods:{\n        viewMore(job){\n            console.log(job);\n            this.cluster_id = job.cluster;\n            this.main_node_ip = job.main_node_ip;\n            this.$router.push('job/'+job['jid']);\n        },\n        async downloadFile(job){\n            console.log(\"ghh\")\n            await axios\n                .get(this.url+':8000/report/getSinkTopicResults/'+job['cluster'] + \n                    '/'+job['jid']+'/full')\n            .then((resp)=>{\n                console.log(resp.data.messages)\n                const jsonString = JSON.stringify(resp.data.messages);\n                const blob = new Blob([jsonString], { type: 'text/plain;charset=utf-8'})\n                saveAs(blob,'result.txt')\n            });\n      }\n    },\n    computed:{\n        cluster_id: {\n\t\t\tget() {\n\t\t\t\treturn this.$store.state.cluster_id;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$store.commit('setClusterId', value);\n\t\t\t},\n\t\t},\n        main_node_ip: {\n            get() {\n\t\t\t\treturn this.$store.state.main_node_ip;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$store.commit('setMainNodeIP', value);\n\t\t\t},\n        }\n    },\n}\n</script>\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}