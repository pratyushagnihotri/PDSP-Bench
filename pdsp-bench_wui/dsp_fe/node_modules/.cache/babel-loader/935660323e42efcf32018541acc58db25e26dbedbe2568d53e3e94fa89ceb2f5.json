{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'ExploreCloudlabNode',\n  data() {\n    return {\n      nodetable: [],\n      url: process.env.VUE_APP_URL,\n      headers: [{\n        text: \"Node domain\",\n        align: 'left',\n        value: 'domain_name'\n      }, {\n        text: \"User\",\n        align: 'left',\n        value: 'user'\n      }, {\n        text: \"Created time\",\n        value: 'creation_date'\n      }, {\n        text: \"Action\",\n        value: 'action'\n      }],\n      nodes: [],\n      searchTerm: '',\n      user: '',\n      be_ssh: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC3usQTaEKg6vGtapFu8aALvc6NbRfFZqTVcA0RfAQyBs1sX1D3CCEkW1fj0gk6pRvVZmE6prbYlH32PWxUYoIBL0tXKsSoJbSYyH/xcbjxQjysYradyq4ZW5w9FM+CFSFb4uCfe0554L1NDA80a1P3Cd1mvXlNXWlwwRpcD+qr9wEOD6XUWlCp4d8pk+73Dk/8zyOETyPLF1g68RyQEaprWqrDiA/HXdE5pgpTVzJ0+NhaN14yxr9nX5K6OlFNAOcw+8HhLeXwqmfKN67q1RpvQrjSTZvXXSe+iDsxIFCm8j9whpovzHpwEhhpWtMgil8DfgfgPK9twlCPpIpLhnrQcXJg9wJEwXDzMF7/A22ZJJ+IZPzD+VGI85OuvLjvNcUmz7L/R3Zfd7jAsbiKGw/5+mTXrY6gr0n3ul99fhY9dsaUwDJ6jpANz8C/kQ2LUM7GUI83nhZxgT2ObzZFmmbnQrFks4Q/69okXIZWakq0XjFUkec45fz+9OxR4T9390c= legion@legion',\n      domain_name: ''\n    };\n  },\n  async mounted() {\n    this.refresh();\n  },\n  methods: {\n    async addNode() {\n      var post_data = {\n        \"domain_name\": this.domain_name,\n        \"user\": this.user\n      };\n      await axios.post(this.url + \":8000/infra/create/node/1\", post_data).then(async response => {\n        var resp = await response.data;\n        if (resp.success) {\n          this.snackbar = {\n            view: true,\n            timeout: 3000,\n            text: resp.status,\n            color: 'primary'\n          };\n        }\n        this.refresh();\n      }).catch(err => {\n        this.snackbar = {\n          view: true,\n          timeout: 8000,\n          text: err.response.data.status,\n          color: 'error'\n        };\n      });\n\n      //console.log(node);\n    },\n\n    async deleteNode(node) {\n      console.log(node);\n      await axios.delete(this.url + \":8000/infra/node/delete/\" + node['domain_name']).then(resp => {\n        this.snackbar = {\n          view: true,\n          timeout: 3000,\n          text: resp.status,\n          color: 'primary'\n        };\n        this.refresh();\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    async refresh() {\n      await axios.get(this.url + \":8000/infra/getAll/nodes/1\").then(resp => {\n        var respData = resp.data.list_of_nodes;\n        this.nodes = respData;\n        console.log(this.nodes);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAiGA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC,UACA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAE;MAAA,GACA;QAAAF;QAAAE;MAAA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;IACA;EACA;EACAC;IACA;MACA;QACA;QACA;MACA;MACA,YACAC,wDACAC;QAEA;QACA;UACA;YACAC;YACAC;YACAZ;YACAa;UACA;QACA;QACA;MACA,GACAC;QAEA;UACAH;UACAC;UACAZ;UACAa;QACA;MACA;;MAEA;IAEA;;IACA;MACAE;MACA,YACAC,oEACAN;QACA;UACAC;UACAC;UACAZ;UACAa;QACA;QACA;MAEA,GACAC;QACAC;MACA;IAEA;IACA;MACA,YACAE,6CACAP;QAEA;QAEA;QACAK;MAEA,GACAD;QACAC;MACA;IACA;EACA;AACA","names":["name","data","nodetable","url","headers","text","align","value","nodes","searchTerm","user","be_ssh","domain_name","methods","post","then","view","timeout","color","catch","console","delete","get"],"sourceRoot":"src/views/dashboard","sources":["ExploreCloudlabNode.vue"],"sourcesContent":["<template>\n    <div>\n        <v-hover class=\"mt-12\" v-slot:default=\"{ hover }\">\n        <v-card class=\"my-6 pa-0\" :elevation=\"hover ? 24 : 6\" >\n            <v-card-title>\n                <v-sheet color=\"primary\" elevation=\"16\"\n                  class=\"justify-center mt-n12 pl-16 pr-16 pt-6 pb-6 rounded  white--text \">\n                  <h3>Explore Cloudlab Nodes</h3>\n                </v-sheet>\n            </v-card-title>\n            <v-card-text>\n                \n                <v-text-field \n                    v-model=\"searchTerm\" \n                    placeholder=\"Search\" \n                ></v-text-field>\n                <v-data-table \n                    v-model=\"nodetable\"\n                    :headers=\"headers\" \n                    :items=\"nodes\" \n                    :search=\"searchTerm\"\n                    class=\"flex-grow-1 \"  \n                    item-key=\"domain_name\" \n                    >\n                    \n                    <template #[`item.action`]=\"{ item }\">\n                        <div class=\"actions\">\n                            \n                            <v-btn  color=\"error\" @click=\"deleteNode(item)\" small>\n                                Delete\n                            </v-btn>\n                        </div>\n                    </template>\n              \n            </v-data-table>\n            </v-card-text>\n        </v-card>\n        </v-hover>\n        <v-hover class=\"mt-12\" v-slot:default=\"{ hover }\">\n            <v-card class=\"my-6 pa-0\" :elevation=\"hover ? 24 : 6\" >\n                <v-card-title>\n                    <v-sheet color=\"primary\" elevation=\"16\"\n                      class=\"justify-center mt-n12 pl-16 pr-16 pt-6 pb-6 rounded  white--text \">\n                      <h3>Add cloudlab node</h3>\n                      \n\n                    </v-sheet>\n                </v-card-title>\n\n                <v-card-text>\n                    <v-row class=\"mt-6\">\n                       <!--  <v-col cols=\"12\">\n                            Copy this ssh key into your cloulab user account setting\n                            <v-textarea\n                                v-model=\"be_ssh\"\n                                color=\"black\"\n                                outlined\n                                disabled\n                            ></v-textarea>\n                            \n                        </v-col>\n -->                        <v-col cols=\"6\">\n                            <v-text-field \n                                background-color=\"white\"\n                                color=\"black\"\n                                v-model=\"domain_name\"\n                                label=\"Node domain name\"\n                                outlined\n                                clearable\n                            ></v-text-field>\n                        </v-col>\n                        <v-col cols=\"6\">\n                            <v-text-field \n                                background-color=\"white\"\n                                color=\"black\"\n                                v-model=\"user\"\n                                label=\"User name\"\n                                outlined\n                                clearable\n                            ></v-text-field>\n                        </v-col>\n                    </v-row>\n                    \n              \n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"primary\" class=\"ma-4\" elevation=\"3\" @click=\"addNode()\">\n                        <v-icon>mdi-plus</v-icon><b>Add node</b>\n                    </v-btn>\n                </v-card-actions>\n            </v-card>\n            </v-hover>\n            \n    </div>\n</template>\n<script>\nimport axios from 'axios';\n\nexport default {\n    name: 'ExploreCloudlabNode',\n    data(){\n        return {\n            nodetable:[],\n            url: process.env.VUE_APP_URL,\n            headers: [\n\t\t\t\t{ text: \"Node domain\", align: 'left', value: 'domain_name' },\n\t\t\t\t{ text: \"User\", align: 'left', value: 'user' },\n\t\t\t\t{ text: \"Created time\", value: 'creation_date' },\n                { text: \"Action\", value:'action'}\n\t\t\t],\n            nodes:[],\n            searchTerm:'',\n            user:'',\n            be_ssh:'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC3usQTaEKg6vGtapFu8aALvc6NbRfFZqTVcA0RfAQyBs1sX1D3CCEkW1fj0gk6pRvVZmE6prbYlH32PWxUYoIBL0tXKsSoJbSYyH/xcbjxQjysYradyq4ZW5w9FM+CFSFb4uCfe0554L1NDA80a1P3Cd1mvXlNXWlwwRpcD+qr9wEOD6XUWlCp4d8pk+73Dk/8zyOETyPLF1g68RyQEaprWqrDiA/HXdE5pgpTVzJ0+NhaN14yxr9nX5K6OlFNAOcw+8HhLeXwqmfKN67q1RpvQrjSTZvXXSe+iDsxIFCm8j9whpovzHpwEhhpWtMgil8DfgfgPK9twlCPpIpLhnrQcXJg9wJEwXDzMF7/A22ZJJ+IZPzD+VGI85OuvLjvNcUmz7L/R3Zfd7jAsbiKGw/5+mTXrY6gr0n3ul99fhY9dsaUwDJ6jpANz8C/kQ2LUM7GUI83nhZxgT2ObzZFmmbnQrFks4Q/69okXIZWakq0XjFUkec45fz+9OxR4T9390c= legion@legion',\n            domain_name:''\n        }\n    },\n    async mounted(){\n        this.refresh();\n    },\n    methods:{\n        async addNode(){\n            var post_data = {\n                \"domain_name\":this.domain_name,\n                \"user\": this.user\n            }\n            await axios\n                    .post(this.url+\":8000/infra/create/node/1\",post_data)\n                    .then(async (response) => {\n                        \n                        var resp = await response.data;\n                        if(resp.success){\n                            this.snackbar = {\n                                view: true,\n                                timeout: 3000,\n                                text: resp.status,\n                                color: 'primary'\n                            };\n                        }\n                        this.refresh()\n                    })\n                    .catch((err) => {\n                        \n                        this.snackbar = {\n                            view: true,\n                            timeout: 8000,\n                            text: err.response.data.status,\n                            color: 'error'\n                        };\n                    });\n\n            //console.log(node);\n            \n        },\n        async deleteNode(node){\n            console.log(node);\n            await axios\n                .delete(this.url+\":8000/infra/node/delete/\"+node['domain_name'])\n                .then((resp)=> {\n                    this.snackbar = {\n                        view: true,\n                        timeout: 3000,\n                        text: resp.status,\n                        color: 'primary'\n                    };\n                    this.refresh();\n\n                })\n                .catch((err)=>{\n                    console.log(err)\n                })\n\n        },\n        async refresh(){\n            await axios\n            .get(this.url+\":8000/infra/getAll/nodes/1\")\n            .then((resp)=>{\n                \n                var respData = resp.data.list_of_nodes\n                \n                this.nodes = respData\n                console.log(this.nodes)\n                \n            })\n            .catch((err)=>{\n                console.log(err)\n            })\n        }\n    }\n}\n</script>\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}