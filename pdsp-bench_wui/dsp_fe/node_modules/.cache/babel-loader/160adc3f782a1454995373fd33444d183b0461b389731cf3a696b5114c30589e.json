{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'CreateCluster',\n  data() {\n    return {\n      hwlist: ['d710', 'm510', 'xl170', 'c6525-25g', 'c6525-100g', 'c6320'],\n      resourcesTypes: ['CPU Only', 'CPU + GPU', 'GPU Only'],\n      jobTypes: ['Word Count', 'Smart Grid', 'Ad Analytics'],\n      tmSeperateSpace: false,\n      url: process.env.VUE_APP_URL,\n      hardwaretype: '',\n      cname: '',\n      crestype: '',\n      parallelizationDegree: '',\n      cnumoftmslots: '',\n      ctypes: ['Apache Flink', 'Apache Storm'],\n      ctype: 'Apache Flink',\n      cnumoftm: '',\n      showProgress: false\n    };\n  },\n  computed: {\n    snackbar: {\n      get() {\n        return this.$store.state.snackbar;\n      },\n      set(value) {\n        this.$store.commit('setSnackbar', value);\n      }\n    }\n  },\n  methods: {\n    async createCluster() {\n      // the variable that contains cluster name as the user input is being checked if it is not empty.\n      if (this.cname.trim().length == 0) {\n        // snackbar global variable is changed that is defined in the store/index.js. used in App.vue\n        this.snackbar = {\n          view: true,\n          timeout: 10000,\n          text: 'Please check the form',\n          color: 'error'\n        };\n        return;\n      }\n      // this variable is set true to show the progress v-dialog\n      this.showProgress = true;\n\n      // Collecting the create cluster input data to the data JSON\n      var data = {\n        \"cluster_name\": this.cname.trim(),\n        \"cluster_type\": this.ctype,\n        \"cluster_resource_type\": this.crestype,\n        \"cluster_tm_slots\": this.cnumoftmslots,\n        \"cluster_num_tm\": this.cnumoftm,\n        \"cluster_seperate_space\": this.tmSeperateSpace,\n        \"hardware_cloudlab\": this.hardwaretype\n      };\n\n      // calling post method to the create cluster end point\n      await axios.post(this.url + ':8000/infra/create', data).then(async response => {\n        this.showProgress = false;\n        var resp = await response.data;\n        if (resp.success) {\n          this.snackbar = {\n            view: true,\n            timeout: 3000,\n            text: resp.status,\n            color: 'primary'\n          };\n        }\n      }).catch(err => {\n        this.showProgress = false;\n        this.snackbar = {\n          view: true,\n          timeout: 8000,\n          text: err.response.data.status,\n          color: 'error'\n        };\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAyFA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACAC;MACAC;QACA;MACA;MACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MACA;MACA;QAEA;QACA;UACAC;UACAC;UACAC;UACAC;QACA;QACA;MAEA;MACA;MACA;;MAEA;MACA;QACA;QACA;QACA;QAEA;QACA;QACA;QACA;MAEA;;MAEA;MACA,YACAC,4CACAC;QACA;QACA;QACA;UACA;YACAL;YACAC;YACAC;YACAC;UACA;QAEA;MACA,GACAG;QACA;QACA;UACAN;UACAC;UACAC;UACAC;QACA;MAEA;IACA;EACA;AACA","names":["name","data","hwlist","resourcesTypes","jobTypes","tmSeperateSpace","url","hardwaretype","cname","crestype","parallelizationDegree","cnumoftmslots","ctypes","ctype","cnumoftm","showProgress","computed","snackbar","get","set","methods","view","timeout","text","color","post","then","catch"],"sourceRoot":"src/views/dashboard","sources":["CreateCluster.vue"],"sourcesContent":["<template>\n    <div>\n        <v-hover v-slot:default=\"{ hover }\">\n            <v-card class=\"my-6 pa-0\" color=\"white\" :elevation=\"hover ? 24 : 6\">\n                <v-card-title>\n                    <v-sheet color=\"primary\" elevation=\"24\"\n                        class=\"justify-center mt-n12 pl-16 pr-16 pt-6 pb-6 rounded  white--text \">\n                        <h3>Create Cluster</h3>\n                    </v-sheet>\n                </v-card-title>\n                <v-card-text>\n                    <v-row class=\"mt-6\">\n                        <v-col>\n                            <v-select background-color=\"white\" v-model=\"ctype\" :items=\"ctypes\"\n                                label=\"Cluster type\" outlined></v-select>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"6\">\n                            <v-text-field background-color=\"white\" color=\"black\" v-model=\"cname\" label=\"Cluster name\"\n                                outlined clearable></v-text-field>\n                        </v-col>\n                        <v-col cols=\"6\">\n                            <v-select background-color=\"white\" v-model=\"crestype\" :items=\"resourcesTypes\"\n                                label=\"Resource Usage\" outlined></v-select>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n\n                        <v-col cols=\"6\">\n                            <v-text-field background-color=\"white\" v-model=\"cnumoftmslots\" label=\"Number of slots (Task Slots or Workers)\"\n                                type=\"number\" outlined clearable></v-text-field>\n                        </v-col>\n                        <v-col cols=\"6\">\n                            <v-select background-color=\"white\" v-model=\"hardwaretype\" :items=\"hwlist\"\n                                label=\"select the hardware you chose on cloudlab\" outlined></v-select>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n\n                        <v-col cols=\"6\">\n                            <v-checkbox v-model=\"tmSeperateSpace\" label=\"Run Task managers in seperate nodes\"></v-checkbox>\n                            <v-text-field v-model=\"cnumoftm\" v-if=\"tmSeperateSpace == true\" type=\"number\"\n                                label=\"Number of task managers\" outlined></v-text-field>\n                        </v-col>\n                        <v-col cols=\"6\">\n\n                        </v-col>\n                    </v-row>\n\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"primary\" class=\"ma-4\" elevation=\"3\" @click=\"createCluster()\">\n                        <v-icon>mdi-plus</v-icon><b>Create cluster</b>\n                    </v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-hover>\n\n        <v-dialog width=\"50%\" v-model=\"showProgress\">\n            <v-card color=\"primary\">\n                <v-card-title class=\"white--text\">Please wait <v-progress-linear color=\"deep-purple green\" indeterminate\n                        rounded height=\"6\"></v-progress-linear></v-card-title>\n                <v-card-text color=\"primary\">\n                    <v-list dense color=\"primary\" class=\"white--text\">\n                        <v-list-item class=\"white--text\">\n                            Updating configuration files\n                        </v-list-item>\n                        <v-list-item class=\"white--text\">\n                            Starting Flink cluster\n                        </v-list-item>\n                        <v-list-item class=\"white--text\">\n                            Starting Prometheus Server\n                        </v-list-item>\n                        <v-list-item class=\"white--text\">\n                            Starting Grafana Server\n                        </v-list-item>\n                        <v-list-item class=\"white--text\">\n                            Sending Job to the cluster\n                        </v-list-item>\n                    </v-list>\n                </v-card-text>\n\n            </v-card>\n        </v-dialog>\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n    name: 'CreateCluster',\n    data() {\n        return {\n            hwlist: ['d710','m510','xl170', 'c6525-25g','c6525-100g', 'c6320'],\n            resourcesTypes: ['CPU Only', 'CPU + GPU', 'GPU Only'],\n            jobTypes: ['Word Count', 'Smart Grid', 'Ad Analytics'],\n            tmSeperateSpace: false,\n            url: process.env.VUE_APP_URL,\n            hardwaretype: '',\n            cname: '',\n            crestype: '',\n            parallelizationDegree: '',\n            cnumoftmslots: '',\n            ctypes: ['Apache Flink', 'Apache Storm'],\n            ctype: 'Apache Flink',\n            cnumoftm: '',\n            showProgress: false,\n\n        }\n    },\n    computed: {\n        snackbar: {\n            get() {\n                return this.$store.state.snackbar;\n            },\n            set(value) {\n                this.$store.commit('setSnackbar', value);\n            },\n        }\n    },\n    methods: {\n        async createCluster() {\n            // the variable that contains cluster name as the user input is being checked if it is not empty.\n            if (this.cname.trim().length == 0) {\n\n                // snackbar global variable is changed that is defined in the store/index.js. used in App.vue\n                this.snackbar = {\n                    view: true,\n                    timeout: 10000,\n                    text: 'Please check the form',\n                    color: 'error'\n                };\n                return;\n\n            }\n            // this variable is set true to show the progress v-dialog\n            this.showProgress = true;\n\n            // Collecting the create cluster input data to the data JSON\n            var data = {\n                \"cluster_name\": this.cname.trim(),\n                \"cluster_type\": this.ctype,\n                \"cluster_resource_type\": this.crestype,\n\n                \"cluster_tm_slots\": this.cnumoftmslots,\n                \"cluster_num_tm\": this.cnumoftm,\n                \"cluster_seperate_space\": this.tmSeperateSpace,\n                \"hardware_cloudlab\": this.hardwaretype\n\n            }\n\n            // calling post method to the create cluster end point\n            await axios\n                .post(this.url + ':8000/infra/create', data)\n                .then(async (response) => {\n                    this.showProgress = false;\n                    var resp = await response.data;\n                    if (resp.success) {\n                        this.snackbar = {\n                            view: true,\n                            timeout: 3000,\n                            text: resp.status,\n                            color: 'primary'\n                        };\n\n                    }\n                })\n                .catch((err) => {\n                    this.showProgress = false;\n                    this.snackbar = {\n                        view: true,\n                        timeout: 8000,\n                        text: err.response.data.status,\n                        color: 'error'\n                    };\n\n                });\n        }\n    }\n}\n</script>\n<style></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}